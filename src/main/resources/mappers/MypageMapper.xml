<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.zipchelin.repository.mybatis.mappers.MypageMapper">
	
	<!-- 비밀번호 체크 -->
	<select id="checkPwd" parameterType="java.util.Map">
		select decode(count(*),1,'true',0,'false') result from member_tbl where member_id=#{memberId} and member_pwd=#{memberPwd}
	</select>
	
	<!-- 멤버 조회 -->
    <select id="selectMemberById" resultType="com.zipchelin.domain.Member" parameterType="string">
        select member_ID, member_PWD, member_NAME, member_EMAIL, member_PHONE, JOIN_DATE, member_IMG, MEMBER_ROLE
        from member_TBL
        where member_ID = #{id}
    </select>

    <!-- 멤버 수정 -->
    <update id="updateMember" parameterType="com.zipchelin.domain.Member">
        update member_TBL
        set member_pwd   = #{memberPwd},
            member_email = #{memberEmail},
            member_phone = #{memberPhone},
            member_img   = #{memberImg}
        where member_ID = #{memberId}
    </update>
    
    <!-- 내 글,내 댓글, 찜 수 체크-->
    <select id="countMyGuiPick" parameterType="String" resultType="int">
    	select count(*) from gui_pick where user_id=#{id}
	</select>
	<select id="countMyRecPick" parameterType="String" resultType="int">
		select count(*) from rec_pick where user_id=#{id}
	</select>
	<select id="countMyQna" parameterType="String" resultType="int">
		select count(*) from qna_tbl where user_id=#{id}
	</select>
	<select id="countMyMyre" parameterType="String" resultType="int">
		select count(*) from myrecipe_tbl where user_id=#{id}
	</select>
	<select id="countMyMyreReply" parameterType="String" resultType="int">
		select count(*) from myrecipe_reply_tbl where re_id=#{id}
	</select>
	<select id="countMyQnaReply" parameterType="String" resultType="int">
		select count(*) from qna_reply_tbl where re_id=#{id}
	</select>
</mapper>